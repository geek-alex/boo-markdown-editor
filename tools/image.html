<link rel="import" href="../boo-markdown-tool.html">
<link rel="import" href="../../iron-iconset-svg/iron-iconset-svg.html">
<link rel="import" href="../../iron-icon/iron-icon.html">

<iron-iconset-svg size="24" name="boo-markdown-tool-image">
  <svg>
    <defs>
      <g id="icon">
        <path d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z"></path>
      </g>
    </defs>
  </svg>
</iron-iconset-svg>

<dom-module id="boo-markdown-tool-image">
  <template>
    <style>
      iron-icon {
        color: white;
      }
      iron-icon:hover {
        cursor: pointer;
      }
    </style>
    <iron-icon 
      title="添加图片"
      icon="boo-markdown-tool-image:icon" 
      on-click="_openSelector"></iron-icon>
  </template>
  <script>
    class BooMarkdownToolImage extends BooMarkdownTool {

      static get is() { return 'boo-markdown-tool-image'; }

      static get properties() {
        return {
          imagesUrl: {
            type: String,
          },
          imageUploadUrl: {
            type: String,
          },
        };
      }

      connectedCallback() {
        super.connectedCallback();
      }

      insertImage(label, url) {
        this.markedEditor.insert('!['+label+']('+url+')');
        this.markedEditor.showToolbar = false;
      }

      _openSelector(e) {
        this.insertImage('helloworld', 'http://p1.so.qhmsg.com/t01ab5a42ff1d977e06.jpg');
      }
    }

    window.customElements.define(BooMarkdownToolImage.is, BooMarkdownToolImage);
  </script>
</dom-module>
